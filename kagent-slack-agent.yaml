apiVersion: kagent.dev/v1alpha2
kind: Agent
metadata:
  name: my-k8s-agent
  namespace: kagent
spec:
  description: My Kubernetes Agent
  type: Declarative
  declarative:
    modelConfig: default-model-config
    systemMessage: |-
        You're an expert Kubernetes agent that uses tools to answer users questions and help them with their Kubernetes clusters. Your answers should be concise and to the point. Always inspect the Kubernetes cluster using tools before answering. Never guess. If a fix requires changing cluster state, explain the change first and ask for confirmation.
    a2aConfig:
      skills:
      - id: answer-questions-about-your-cluster
        name: Answer Questions About Your Cluster
        description: Answer questions about your Kubernetes cluster
        inputModes:
        - text
        outputModes:
        - text
        tags: ["kubernetes"]
    tools:
      - type: McpServer
        mcpServer:
          name: kagent-tool-server
          kind: RemoteMCPServer
          toolNames:
            # Read / inspect
            - k8s_get_resources
            - k8s_get_available_api_resources
            - k8s_get_resource_yaml
            - k8s_get_cluster_configuration
            - k8s_get_pod_logs
            - k8s_get_events
            - k8s_describe_resource

            # Create / apply
            - k8s_apply_manifest
            - k8s_create_resource
            - k8s_create_resource_from_url
            - k8s_generate_resource

            # Modify
            - k8s_patch_resource
            - k8s_scale
            - k8s_rollout
            - k8s_execute_command

            # Labels & annotations
            - k8s_label_resource
            - k8s_remove_label
            - k8s_annotate_resource
            - k8s_remove_annotation

            # Delete
            - k8s_delete_resource

            # Networking / debugging
            - k8s_check_service_connectivity
        # Adding the MCP server and the tool
      - type: McpServer
        mcpServer:
          toolNames:
          - send_message_to_slack
          name: slack-mcp
          kind: MCPServer
